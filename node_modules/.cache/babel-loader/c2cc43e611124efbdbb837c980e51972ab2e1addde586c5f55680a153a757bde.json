{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fede\\\\Desktop\\\\Proyecto\\\\registro-login\\\\src\\\\pages\\\\LoginRegister.js\",\n  _s = $RefreshSig$();\nimport \"./LoginRegister.css\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\nimport logo from \"../assets/logo.png\";\n\n// Configurar SweetAlert2 para React\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MySwal = withReactContent(Swal);\n\n// Obtén la URL del backend desde la variable de entorno\n_c = MySwal;\nconst API_URL = process.env.REACT_APP_BACKEND_URL;\nfunction LoginRegister({\n  onLogin\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\"\n  });\n  const [showLogin, setShowLogin] = useState(true);\n  const [showToggleButton, setShowToggleButton] = useState(false);\n\n  // Alternar entre formularios de Login y Registro\n  const toggleForm = () => {\n    setShowLogin(!showLogin);\n    setFormData({\n      name: \"\",\n      email: \"\",\n      password: \"\"\n    });\n  };\n\n  // Manejar cambios en los campos del formulario\n  const handleInputChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Manejar envío del formulario\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (showLogin) {\n        // Llamada para iniciar sesión\n        const response = await axios.post(`${API_URL}/login`, {\n          email: formData.email,\n          password: formData.password\n        });\n        // Guardar token y nombre del usuario en localStorage\n        localStorage.setItem(\"token\", response.data.token);\n        localStorage.setItem(\"userName\", response.data.name);\n        // Mostrar mensaje de éxito\n        MySwal.fire({\n          title: \"Éxito\",\n          text: response.data.message,\n          icon: \"success\"\n        }).then(() => {\n          onLogin(response.data.name);\n        });\n      } else {\n        // Llamada para registrar usuario\n        const response = await axios.post(`${API_URL}/register`, {\n          name: formData.name,\n          email: formData.email,\n          password: formData.password\n        });\n        MySwal.fire({\n          title: \"Éxito\",\n          text: response.data.message,\n          icon: \"success\"\n        });\n        setFormData({\n          name: \"\",\n          email: \"\",\n          password: \"\"\n        });\n        setShowLogin(true);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      MySwal.fire({\n        title: \"Error\",\n        text: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Error en la solicitud. Por favor, intenta de nuevo.\",\n        icon: \"error\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"Logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: showLogin ? \"Iniciar Sesión\" : \"Registrarse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [!showLogin && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Ingresa tu nombre\",\n        value: formData.name,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Ingresa tu correo\",\n        value: formData.email,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Ingresa tu contrase\\xF1a\",\n        value: formData.password,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: showLogin ? \"Iniciar Sesión\" : \"Registrarse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), showToggleButton && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"toggle\",\n      onClick: toggleForm,\n      children: showLogin ? \"¿No tienes cuenta? Regístrate\" : \"¿Ya tienes cuenta? Inicia Sesión\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginRegister, \"NnXk6wkv+45Z8Ts6WPzfDS4qLSc=\");\n_c2 = LoginRegister;\nexport default LoginRegister;\nvar _c, _c2;\n$RefreshReg$(_c, \"MySwal\");\n$RefreshReg$(_c2, \"LoginRegister\");","map":{"version":3,"names":["React","useState","axios","Swal","withReactContent","logo","jsxDEV","_jsxDEV","MySwal","_c","API_URL","process","env","REACT_APP_BACKEND_URL","LoginRegister","onLogin","_s","formData","setFormData","name","email","password","showLogin","setShowLogin","showToggleButton","setShowToggleButton","toggleForm","handleInputChange","e","target","value","handleSubmit","preventDefault","response","post","localStorage","setItem","data","token","fire","title","text","message","icon","then","error","_error$response","_error$response$data","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/Fede/Desktop/Proyecto/registro-login/src/pages/LoginRegister.js"],"sourcesContent":["import \"./LoginRegister.css\";\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\nimport logo from \"../assets/logo.png\";\r\n\r\n// Configurar SweetAlert2 para React\r\nconst MySwal = withReactContent(Swal);\r\n\r\n// Obtén la URL del backend desde la variable de entorno\r\nconst API_URL = process.env.REACT_APP_BACKEND_URL;\r\n\r\nfunction LoginRegister({ onLogin }) {\r\n  const [formData, setFormData] = useState({ name: \"\", email: \"\", password: \"\" });\r\n  const [showLogin, setShowLogin] = useState(true);\r\n  const [showToggleButton, setShowToggleButton] = useState(false);\r\n\r\n  // Alternar entre formularios de Login y Registro\r\n  const toggleForm = () => {\r\n    setShowLogin(!showLogin);\r\n    setFormData({ name: \"\", email: \"\", password: \"\" });\r\n  };\r\n\r\n  // Manejar cambios en los campos del formulario\r\n  const handleInputChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Manejar envío del formulario\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (showLogin) {\r\n        // Llamada para iniciar sesión\r\n        const response = await axios.post(`${API_URL}/login`, {\r\n          email: formData.email,\r\n          password: formData.password,\r\n        });\r\n        // Guardar token y nombre del usuario en localStorage\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"userName\", response.data.name);\r\n        // Mostrar mensaje de éxito\r\n        MySwal.fire({\r\n          title: \"Éxito\",\r\n          text: response.data.message,\r\n          icon: \"success\",\r\n        }).then(() => {\r\n          onLogin(response.data.name);\r\n        });\r\n      } else {\r\n        // Llamada para registrar usuario\r\n        const response = await axios.post(`${API_URL}/register`, {\r\n          name: formData.name,\r\n          email: formData.email,\r\n          password: formData.password,\r\n        });\r\n        MySwal.fire({\r\n          title: \"Éxito\",\r\n          text: response.data.message,\r\n          icon: \"success\",\r\n        });\r\n        setFormData({ name: \"\", email: \"\", password: \"\" });\r\n        setShowLogin(true);\r\n      }\r\n    } catch (error) {\r\n      MySwal.fire({\r\n        title: \"Error\",\r\n        text: error.response?.data?.message || \"Error en la solicitud. Por favor, intenta de nuevo.\",\r\n        icon: \"error\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-container\">\r\n      <img src={logo} alt=\"Logo\" />\r\n      <h1>{showLogin ? \"Iniciar Sesión\" : \"Registrarse\"}</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        {/* Campo de nombre solo para registro */}\r\n        {!showLogin && (\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Ingresa tu nombre\"\r\n            value={formData.name}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n        )}\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Ingresa tu correo\"\r\n          value={formData.email}\r\n          onChange={handleInputChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Ingresa tu contraseña\"\r\n          value={formData.password}\r\n          onChange={handleInputChange}\r\n          required\r\n        />\r\n        <button type=\"submit\">{showLogin ? \"Iniciar Sesión\" : \"Registrarse\"}</button>\r\n      </form>\r\n      {showToggleButton && (\r\n        <button className=\"toggle\" onClick={toggleForm}>\r\n          {showLogin ? \"¿No tienes cuenta? Regístrate\" : \"¿Ya tienes cuenta? Inicia Sesión\"}\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginRegister;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}