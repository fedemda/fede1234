{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fede\\\\Desktop\\\\Proyecto\\\\registro-login\\\\src\\\\components\\\\forms\\\\BuscarEstudiante.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport Swal from \"sweetalert2\";\nimport debounce from \"lodash.debounce\";\nimport { ModalOverlay, ModalContent, ModalTitle, ModalInput, ModalButtons, ModalButton, ModalLabel } from \"./ModalStyles\";\n;\nimport \"./BuscarEstudiante.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BuscarEstudiante = () => {\n  _s();\n  const [busqueda, setBusqueda] = useState(\"\");\n  const [resultados, setResultados] = useState([]);\n  const [modalAbierto, setModalAbierto] = useState(false);\n  const [filaSeleccionada, setFilaSeleccionada] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [dniError, setDniError] = useState(null);\n  const [fechaError, setFechaError] = useState(null);\n  const [emailError, setEmailError] = useState(null);\n\n  // Función para capitalizar cada palabra\n  const capitalizeWords = str => {\n    return str.toLowerCase().split(\" \").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\n  };\n  const buscarDatos = useCallback(debounce(async query => {\n    if (query.trim() !== \"\") {\n      setLoading(true);\n      setError(null);\n      try {\n        const response = await fetch(`http://localhost:5000/estudiantes?busqueda=${query}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        const data = await response.json();\n        setResultados(data);\n      } catch (error) {\n        setError(\"Error al buscar datos\");\n      } finally {\n        setLoading(false);\n      }\n    } else {\n      setResultados([]);\n    }\n  }, 500), []);\n  useEffect(() => {\n    buscarDatos(busqueda);\n  }, [busqueda, buscarDatos]);\n\n  // Función de validación con debounce (mantén debounce para no saturar el endpoint)\n  const validarDniDuplicadoEdicion = useCallback(debounce(async (dni, id) => {\n    if (dni.trim() === \"\" || dni.length !== 8) {\n      setDniError(\"Ingrese un DNI válido\");\n      return;\n    }\n    try {\n      const response = await fetch(`http://localhost:5000/estudiantes/validar-dni?dni=${dni}&id=${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const data = await response.json();\n      if (data.duplicado) {\n        setDniError(\"DNI duplicado en la base de datos\");\n      } else {\n        setDniError(null);\n      }\n    } catch {\n      setDniError(\"Error al validar el DNI\");\n    }\n  }, 500), []);\n\n  // Actualizamos el DNI sin llamar a la validación directamente\n  const manejarCambioDNI = e => {\n    const nuevoDni = e.target.value.replace(/[^0-9]/g, \"\");\n    setFilaSeleccionada(prev => ({\n      ...prev,\n      dni: nuevoDni\n    }));\n  };\n\n  // useEffect para disparar la validación cuando cambie el DNI o el id\n  useEffect(() => {\n    if (filaSeleccionada && filaSeleccionada.dni && filaSeleccionada.id) {\n      validarDniDuplicadoEdicion(filaSeleccionada.dni, filaSeleccionada.id);\n    }\n  }, [filaSeleccionada === null || filaSeleccionada === void 0 ? void 0 : filaSeleccionada.dni, filaSeleccionada === null || filaSeleccionada === void 0 ? void 0 : filaSeleccionada.id, validarDniDuplicadoEdicion]);\n  const manejarCambioFecha = e => {\n    const nuevaFecha = e.target.value;\n    const fechaMinima = new Date(\"1955-01-01\");\n    const fechaMaxima = new Date(\"2008-12-31\");\n    const fechaIngresada = new Date(nuevaFecha);\n    setFilaSeleccionada(prev => ({\n      ...prev,\n      fecha_nacimiento: nuevaFecha\n    }));\n    if (isNaN(fechaIngresada) || fechaIngresada < fechaMinima || fechaIngresada > fechaMaxima) {\n      setFechaError(\"Ingrese una fecha válida\");\n    } else {\n      setFechaError(null);\n    }\n  };\n  const manejarCambioEmail = e => {\n    const nuevoEmail = e.target.value;\n    setFilaSeleccionada(prev => ({\n      ...prev,\n      email: nuevoEmail\n    }));\n\n    // Validar formato de email\n    const regexEmail = /^[^\\s@]+@[^\\s@]+\\.[a-zA-Z]{3,}$/;\n    if (!regexEmail.test(nuevoEmail.trim())) {\n      setEmailError(\"Ingrese un email válido\");\n    } else {\n      setEmailError(null);\n    }\n  };\n  const abrirModal = fila => {\n    setFilaSeleccionada({\n      ...fila\n    });\n    setModalAbierto(true);\n  };\n  const cerrarModal = () => {\n    setModalAbierto(false);\n    setFilaSeleccionada(null);\n    setDniError(null);\n    setFechaError(null);\n    setEmailError(null);\n  };\n  const guardarCambios = async () => {\n    let {\n      nombre,\n      dni,\n      fecha_nacimiento,\n      telefono,\n      email,\n      carrera\n    } = filaSeleccionada;\n\n    // Validaciones generales\n    if (!nombre || !dni || !fecha_nacimiento || !email || !carrera) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: \"Todos los campos son obligatorios.\"\n      });\n      return;\n    }\n    nombre = capitalizeWords(nombre);\n\n    // En lugar de mostrar un Sweet Alert para dniError, simplemente abortamos\n    if (dniError) {\n      return;\n    }\n    if (fechaError) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: fechaError\n      });\n      return;\n    }\n    if (emailError) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: emailError\n      });\n      return;\n    }\n    try {\n      const response = await fetch(`http://localhost:5000/estudiantes/${filaSeleccionada.id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        body: JSON.stringify({\n          apellido_y_nombre: nombre,\n          dni,\n          fecha_de_nacimiento: fecha_nacimiento,\n          telefono,\n          email,\n          carrera\n        })\n      });\n      if (response.ok) {\n        const actualizados = resultados.map(item => item.id === filaSeleccionada.id ? {\n          ...filaSeleccionada,\n          nombre\n        } : item);\n        setResultados(actualizados);\n        cerrarModal();\n        Swal.fire({\n          title: \"Éxito\",\n          text: \"Datos actualizados correctamente.\",\n          icon: \"success\"\n        });\n      } else {\n        throw new Error(\"Error al actualizar los datos.\");\n      }\n    } catch (error) {\n      Swal.fire({\n        title: \"Error\",\n        text: \"Ocurrió un error al guardar los cambios.\",\n        icon: \"error\"\n      });\n    }\n  };\n  const eliminarRegistro = async id => {\n    try {\n      const confirmacion = await Swal.fire({\n        title: \"¿Estás seguro?\",\n        text: \"No podrás revertir esta acción.\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#d33\",\n        cancelButtonColor: \"#3085d6\",\n        confirmButtonText: \"Sí, eliminar\"\n      });\n      if (confirmacion.isConfirmed) {\n        const response = await fetch(`http://localhost:5000/estudiantes/${id}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        if (response.ok) {\n          const nuevosResultados = resultados.filter(fila => fila.id !== id);\n          setResultados(nuevosResultados);\n        } else {\n          throw new Error(\"Error al eliminar el registro\");\n        }\n      }\n    } catch (error) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: \"No se pudo eliminar el registro.\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"buscar-estudiante-main-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buscar-estudiante-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Buscar Estudiante\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Buscar estudiante\",\n        value: busqueda,\n        onChange: e => setBusqueda(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }, this), resultados.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"resultados-busqueda\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Apellido y Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"DNI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Fecha de Nacimiento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Tel\\xE9fono\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Carrera\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: resultados.map(fila => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: fila.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: fila.dni\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: new Date(fila.fecha_nacimiento).toLocaleDateString(\"es-ES\", {\n                day: \"2-digit\",\n                month: \"2-digit\",\n                year: \"numeric\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: fila.telefono\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: fila.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: fila.carrera\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => abrirModal(fila),\n                children: \"\\u270F\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => eliminarRegistro(fila.id),\n                children: \"\\u274C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 19\n            }, this)]\n          }, fila.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }, this), modalAbierto && /*#__PURE__*/_jsxDEV(ModalOverlay, {\n      onClick: cerrarModal,\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n          children: \"Editar Registro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalLabel, {\n          children: \"Apellido y Nombre:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalInput, {\n          type: \"text\",\n          value: filaSeleccionada.nombre,\n          onChange: e => setFilaSeleccionada(prev => ({\n            ...prev,\n            nombre: e.target.value.replace(/[^a-zA-ZÁÉÍÓÚáéíóúÑñ\\s]/g, \"\")\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalLabel, {\n          children: \"DNI:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"relative\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(ModalInput, {\n            className: dniError ? \"error\" : \"\",\n            type: \"text\",\n            value: filaSeleccionada.dni,\n            onChange: manejarCambioDNI\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this), dniError && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"modal-error-message\",\n            children: dniError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalLabel, {\n          children: \"Fecha de Nacimiento:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"relative\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(ModalInput, {\n            className: fechaError ? \"error\" : \"\",\n            type: \"date\",\n            value: filaSeleccionada.fecha_nacimiento.split(\"T\")[0],\n            min: \"1955-01-01\",\n            max: \"2008-12-31\",\n            onChange: manejarCambioFecha\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), fechaError && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"modal-error-message\",\n            children: fechaError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalLabel, {\n          children: \"Tel\\xE9fono:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalInput, {\n          type: \"text\",\n          value: filaSeleccionada.telefono,\n          onChange: e => {\n            const nuevoValor = e.target.value.replace(/[^0-9]/g, \"\");\n            setFilaSeleccionada(prev => ({\n              ...prev,\n              telefono: nuevoValor\n            }));\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalLabel, {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"relative\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(ModalInput, {\n            className: emailError ? \"error\" : \"\",\n            type: \"email\",\n            value: filaSeleccionada.email,\n            onChange: manejarCambioEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this), emailError && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"modal-error-message\",\n            children: emailError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalLabel, {\n          children: \"Carrera:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalInput, {\n          type: \"text\",\n          value: filaSeleccionada.carrera,\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalButtons, {\n          children: [/*#__PURE__*/_jsxDEV(ModalButton, {\n            onClick: guardarCambios,\n            disabled: !!dniError || !!fechaError || !!emailError,\n            style: {\n              backgroundColor: dniError || fechaError || emailError ? \"#ccc\" : \"#007bff\",\n              cursor: dniError || fechaError || emailError ? \"not-allowed\" : \"pointer\"\n            },\n            children: \"Guardar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalButton, {\n            onClick: cerrarModal,\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 275,\n    columnNumber: 5\n  }, this);\n};\n_s(BuscarEstudiante, \"xSxz0pYWop2KbsEkdVDqaQrz2KA=\");\n_c = BuscarEstudiante;\nexport default BuscarEstudiante;\nvar _c;\n$RefreshReg$(_c, \"BuscarEstudiante\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Swal","debounce","ModalOverlay","ModalContent","ModalTitle","ModalInput","ModalButtons","ModalButton","ModalLabel","jsxDEV","_jsxDEV","BuscarEstudiante","_s","busqueda","setBusqueda","resultados","setResultados","modalAbierto","setModalAbierto","filaSeleccionada","setFilaSeleccionada","loading","setLoading","error","setError","dniError","setDniError","fechaError","setFechaError","emailError","setEmailError","capitalizeWords","str","toLowerCase","split","map","word","charAt","toUpperCase","slice","join","buscarDatos","query","trim","response","fetch","headers","Authorization","localStorage","getItem","data","json","validarDniDuplicadoEdicion","dni","id","length","duplicado","manejarCambioDNI","e","nuevoDni","target","value","replace","prev","manejarCambioFecha","nuevaFecha","fechaMinima","Date","fechaMaxima","fechaIngresada","fecha_nacimiento","isNaN","manejarCambioEmail","nuevoEmail","email","regexEmail","test","abrirModal","fila","cerrarModal","guardarCambios","nombre","telefono","carrera","fire","icon","title","text","method","body","JSON","stringify","apellido_y_nombre","fecha_de_nacimiento","ok","actualizados","item","Error","eliminarRegistro","confirmacion","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","nuevosResultados","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","toLocaleDateString","day","month","year","onClick","stopPropagation","style","position","min","max","nuevoValor","readOnly","disabled","backgroundColor","cursor","_c","$RefreshReg$"],"sources":["C:/Users/Fede/Desktop/Proyecto/registro-login/src/components/forms/BuscarEstudiante.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport Swal from \"sweetalert2\";\r\nimport debounce from \"lodash.debounce\";\r\nimport {\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalTitle,\r\n  ModalInput,\r\n  ModalButtons,\r\n  ModalButton,\r\n  ModalLabel,\r\n} from \"./ModalStyles\";;\r\nimport \"./BuscarEstudiante.css\";\r\n\r\nconst BuscarEstudiante = () => {\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [resultados, setResultados] = useState([]);\r\n  const [modalAbierto, setModalAbierto] = useState(false);\r\n  const [filaSeleccionada, setFilaSeleccionada] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [dniError, setDniError] = useState(null);\r\n  const [fechaError, setFechaError] = useState(null);\r\n  const [emailError, setEmailError] = useState(null);\r\n\r\n  // Función para capitalizar cada palabra\r\n  const capitalizeWords = (str) => {\r\n    return str\r\n      .toLowerCase()\r\n      .split(\" \")\r\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(\" \");\r\n  };\r\n\r\n  const buscarDatos = useCallback(\r\n    debounce(async (query) => {\r\n      if (query.trim() !== \"\") {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n          const response = await fetch(\r\n            `http://localhost:5000/estudiantes?busqueda=${query}`,\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n              },\r\n            }\r\n          );\r\n          const data = await response.json();\r\n          setResultados(data);\r\n        } catch (error) {\r\n          setError(\"Error al buscar datos\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      } else {\r\n        setResultados([]);\r\n      }\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    buscarDatos(busqueda);\r\n  }, [busqueda, buscarDatos]);\r\n\r\n  // Función de validación con debounce (mantén debounce para no saturar el endpoint)\r\n  const validarDniDuplicadoEdicion = useCallback(\r\n    debounce(async (dni, id) => {\r\n      if (dni.trim() === \"\" || dni.length !== 8) {\r\n        setDniError(\"Ingrese un DNI válido\");\r\n        return;\r\n      }\r\n      try {\r\n        const response = await fetch(\r\n          `http://localhost:5000/estudiantes/validar-dni?dni=${dni}&id=${id}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            },\r\n          }\r\n        );\r\n        const data = await response.json();\r\n        if (data.duplicado) {\r\n          setDniError(\"DNI duplicado en la base de datos\");\r\n        } else {\r\n          setDniError(null);\r\n        }\r\n      } catch {\r\n        setDniError(\"Error al validar el DNI\");\r\n      }\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  // Actualizamos el DNI sin llamar a la validación directamente\r\n  const manejarCambioDNI = (e) => {\r\n    const nuevoDni = e.target.value.replace(/[^0-9]/g, \"\");\r\n    setFilaSeleccionada((prev) => ({\r\n      ...prev,\r\n      dni: nuevoDni,\r\n    }));\r\n  };\r\n\r\n  // useEffect para disparar la validación cuando cambie el DNI o el id\r\n  useEffect(() => {\r\n    if (filaSeleccionada && filaSeleccionada.dni && filaSeleccionada.id) {\r\n      validarDniDuplicadoEdicion(filaSeleccionada.dni, filaSeleccionada.id);\r\n    }\r\n  }, [filaSeleccionada?.dni, filaSeleccionada?.id, validarDniDuplicadoEdicion]);\r\n\r\n  const manejarCambioFecha = (e) => {\r\n    const nuevaFecha = e.target.value;\r\n    const fechaMinima = new Date(\"1955-01-01\");\r\n    const fechaMaxima = new Date(\"2008-12-31\");\r\n    const fechaIngresada = new Date(nuevaFecha);\r\n\r\n    setFilaSeleccionada((prev) => ({\r\n      ...prev,\r\n      fecha_nacimiento: nuevaFecha,\r\n    }));\r\n\r\n    if (isNaN(fechaIngresada) || fechaIngresada < fechaMinima || fechaIngresada > fechaMaxima) {\r\n      setFechaError(\"Ingrese una fecha válida\");\r\n    } else {\r\n      setFechaError(null);\r\n    }\r\n  };\r\n\r\n  const manejarCambioEmail = (e) => {\r\n    const nuevoEmail = e.target.value;\r\n    setFilaSeleccionada((prev) => ({\r\n      ...prev,\r\n      email: nuevoEmail,\r\n    }));\r\n\r\n    // Validar formato de email\r\n    const regexEmail = /^[^\\s@]+@[^\\s@]+\\.[a-zA-Z]{3,}$/;\r\n    if (!regexEmail.test(nuevoEmail.trim())) {\r\n      setEmailError(\"Ingrese un email válido\");\r\n    } else {\r\n      setEmailError(null);\r\n    }\r\n  };\r\n\r\n  const abrirModal = (fila) => {\r\n    setFilaSeleccionada({ ...fila });\r\n    setModalAbierto(true);\r\n  };\r\n\r\n  const cerrarModal = () => {\r\n    setModalAbierto(false);\r\n    setFilaSeleccionada(null);\r\n    setDniError(null);\r\n    setFechaError(null);\r\n    setEmailError(null);\r\n  };\r\n\r\n  const guardarCambios = async () => {\r\n    let { nombre, dni, fecha_nacimiento, telefono, email, carrera } = filaSeleccionada;\r\n\r\n    // Validaciones generales\r\n    if (!nombre || !dni || !fecha_nacimiento || !email || !carrera) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error\",\r\n        text: \"Todos los campos son obligatorios.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    nombre = capitalizeWords(nombre);\r\n\r\n    // En lugar de mostrar un Sweet Alert para dniError, simplemente abortamos\r\n    if (dniError) {\r\n      return;\r\n    }\r\n    if (fechaError) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error\",\r\n        text: fechaError,\r\n      });\r\n      return;\r\n    }\r\n    if (emailError) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error\",\r\n        text: emailError,\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost:5000/estudiantes/${filaSeleccionada.id}`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n          body: JSON.stringify({\r\n            apellido_y_nombre: nombre,\r\n            dni,\r\n            fecha_de_nacimiento: fecha_nacimiento,\r\n            telefono,\r\n            email,\r\n            carrera,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const actualizados = resultados.map((item) =>\r\n          item.id === filaSeleccionada.id ? { ...filaSeleccionada, nombre } : item\r\n        );\r\n        setResultados(actualizados);\r\n        cerrarModal();\r\n        Swal.fire({\r\n          title: \"Éxito\",\r\n          text: \"Datos actualizados correctamente.\",\r\n          icon: \"success\",\r\n        });\r\n      } else {\r\n        throw new Error(\"Error al actualizar los datos.\");\r\n      }\r\n    } catch (error) {\r\n      Swal.fire({\r\n        title: \"Error\",\r\n        text: \"Ocurrió un error al guardar los cambios.\",\r\n        icon: \"error\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const eliminarRegistro = async (id) => {\r\n    try {\r\n      const confirmacion = await Swal.fire({\r\n        title: \"¿Estás seguro?\",\r\n        text: \"No podrás revertir esta acción.\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        confirmButtonColor: \"#d33\",\r\n        cancelButtonColor: \"#3085d6\",\r\n        confirmButtonText: \"Sí, eliminar\",\r\n      });\r\n\r\n      if (confirmacion.isConfirmed) {\r\n        const response = await fetch(`http://localhost:5000/estudiantes/${id}`, {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const nuevosResultados = resultados.filter((fila) => fila.id !== id);\r\n          setResultados(nuevosResultados);\r\n        } else {\r\n          throw new Error(\"Error al eliminar el registro\");\r\n        }\r\n      }\r\n    } catch (error) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error\",\r\n        text: \"No se pudo eliminar el registro.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"buscar-estudiante-main-container\">\r\n      <div className=\"buscar-estudiante-container\">\r\n        <h2>Buscar Estudiante</h2>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Buscar estudiante\"\r\n          value={busqueda}\r\n          onChange={(e) => setBusqueda(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {error && <p>{error}</p>}\r\n\r\n      {resultados.length > 0 && (\r\n        <div className=\"resultados-busqueda\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Apellido y Nombre</th>\r\n                <th>DNI</th>\r\n                <th>Fecha de Nacimiento</th>\r\n                <th>Teléfono</th>\r\n                <th>Email</th>\r\n                <th>Carrera</th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {resultados.map((fila) => (\r\n                <tr key={fila.id}>\r\n                  <td>{fila.nombre}</td>\r\n                  <td>{fila.dni}</td>\r\n                  <td>\r\n                    {new Date(fila.fecha_nacimiento).toLocaleDateString(\"es-ES\", {\r\n                      day: \"2-digit\",\r\n                      month: \"2-digit\",\r\n                      year: \"numeric\",\r\n                    })}\r\n                  </td>\r\n                  <td>{fila.telefono}</td>\r\n                  <td>{fila.email}</td>\r\n                  <td>{fila.carrera}</td>\r\n                  <td>\r\n                    <button onClick={() => abrirModal(fila)}>✏️</button>\r\n                    <button onClick={() => eliminarRegistro(fila.id)}>❌</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {modalAbierto && (\r\n        <ModalOverlay onClick={cerrarModal}>\r\n          <ModalContent onClick={(e) => e.stopPropagation()}>\r\n            <ModalTitle>Editar Registro</ModalTitle>\r\n            <ModalLabel>Apellido y Nombre:</ModalLabel>\r\n            <ModalInput\r\n              type=\"text\"\r\n              value={filaSeleccionada.nombre}\r\n              onChange={(e) =>\r\n                setFilaSeleccionada((prev) => ({\r\n                  ...prev,\r\n                  nombre: e.target.value.replace(/[^a-zA-ZÁÉÍÓÚáéíóúÑñ\\s]/g, \"\"),\r\n                }))\r\n              }\r\n            />\r\n            <ModalLabel>DNI:</ModalLabel>\r\n            <div style={{ position: \"relative\" }}>\r\n              <ModalInput\r\n                className={dniError ? \"error\" : \"\"}\r\n                type=\"text\"\r\n                value={filaSeleccionada.dni}\r\n                onChange={manejarCambioDNI}\r\n              />\r\n              {dniError && <span className=\"modal-error-message\">{dniError}</span>}\r\n            </div>\r\n\r\n            <ModalLabel>Fecha de Nacimiento:</ModalLabel>\r\n            <div style={{ position: \"relative\" }}>\r\n              <ModalInput\r\n                className={fechaError ? \"error\" : \"\"}\r\n                type=\"date\"\r\n                value={filaSeleccionada.fecha_nacimiento.split(\"T\")[0]}\r\n                min=\"1955-01-01\"\r\n                max=\"2008-12-31\"\r\n                onChange={manejarCambioFecha}\r\n              />\r\n              {fechaError && <span className=\"modal-error-message\">{fechaError}</span>}\r\n            </div>\r\n\r\n            <ModalLabel>Teléfono:</ModalLabel>\r\n            <ModalInput\r\n              type=\"text\"\r\n              value={filaSeleccionada.telefono}\r\n              onChange={(e) => {\r\n                const nuevoValor = e.target.value.replace(/[^0-9]/g, \"\");\r\n                setFilaSeleccionada((prev) => ({\r\n                  ...prev,\r\n                  telefono: nuevoValor,\r\n                }));\r\n              }}\r\n            />\r\n\r\n            <ModalLabel>Email:</ModalLabel>\r\n            <div style={{ position: \"relative\" }}>\r\n              <ModalInput\r\n                className={emailError ? \"error\" : \"\"}\r\n                type=\"email\"\r\n                value={filaSeleccionada.email}\r\n                onChange={manejarCambioEmail}\r\n              />\r\n              {emailError && <span className=\"modal-error-message\">{emailError}</span>}\r\n            </div>\r\n\r\n            <ModalLabel>Carrera:</ModalLabel>\r\n            <ModalInput type=\"text\" value={filaSeleccionada.carrera} readOnly />\r\n            <ModalButtons>\r\n              <ModalButton\r\n                onClick={guardarCambios}\r\n                disabled={!!dniError || !!fechaError || !!emailError}\r\n                style={{\r\n                  backgroundColor: dniError || fechaError || emailError ? \"#ccc\" : \"#007bff\",\r\n                  cursor: dniError || fechaError || emailError ? \"not-allowed\" : \"pointer\",\r\n                }}\r\n              >\r\n                Guardar\r\n              </ModalButton>\r\n              <ModalButton onClick={cerrarModal}>Cancelar</ModalButton>\r\n            </ModalButtons>\r\n          </ModalContent>\r\n        </ModalOverlay>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BuscarEstudiante;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}