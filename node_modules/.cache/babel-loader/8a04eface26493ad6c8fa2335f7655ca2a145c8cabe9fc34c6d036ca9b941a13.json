{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import\"./Calificaciones.css\";import axios from\"axios\";import Swal from\"sweetalert2\";import AnaliticoButton from\"../funciones/AnaliticoButton\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Calificaciones=()=>{const[dni,setDni]=useState(\"\");const[resultados,setResultados]=useState([]);const[mostrarFormulario,setMostrarFormulario]=useState(false);const[curso,setCurso]=useState(\"\");const[materia,setMateria]=useState(\"\");const[lf,setLf]=useState(\"\");const[fechaAprobacion,setFechaAprobacion]=useState(\"\");const fechaAprobacionRef=useRef(null);const[calificacionNumerica,setCalificacionNumerica]=useState(\"\");const[calificacionLetras,setCalificacionLetras]=useState(\"\");const[cursosDisponibles,setCursosDisponibles]=useState([]);const[materiasDisponibles,setMateriasDisponibles]=useState([]);const[carreraSeleccionada,setCarreraSeleccionada]=useState(\"\");const[apNombre,setApNombre]=useState(\"\");const[resolucion,setResolucion]=useState(\"\");const[modoCursada,setModoCursada]=useState(false);const[lfLocked,setLfLocked]=useState(false);useEffect(()=>{if(curso){handleCursoChange({target:{value:curso}});}},[curso]);const handleSearch=async()=>{// Verifica que se haya ingresado DNI y que tenga 8 d√≠gitos\nif(!dni||dni.length<8){Swal.fire({icon:\"error\",title:\"Error\",text:\"Ingrese un DNI v√°lido.\"});return;}try{const response=await axios.get(`http://localhost:5000/estudiantes/${dni}`,{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});console.log(\"üîç Estudiantes:\",response.data);setResultados(response.data);if(response.data.length>0){const estudiante=response.data[0];setApNombre(estudiante.nombre);setCarreraSeleccionada(estudiante.carrera);setResolucion(estudiante.resolucion);}}catch(error){Swal.fire({icon:\"error\",title:\"Error\",text:\"No se encontr√≥ informaci√≥n para este DNI.\"});setResultados([]);}};const handleCargarNotas=async(carrera,resolucionBusqueda)=>{console.log(\"‚úÖ Cargando notas para la carrera:\",carrera);setCarreraSeleccionada(carrera);setResolucion(resolucionBusqueda);// Actualiza la resoluci√≥n con el valor correcto\nsetMostrarFormulario(true);await cargarCursos(carrera);};const cargarCursos=async carrera=>{try{console.log(\"üì° Buscando cursos para la carrera:\",carrera);const response=await axios.get(`http://localhost:5000/materias?carrera=${encodeURIComponent(carrera)}`,{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});console.log(\"‚úÖ Cursos obtenidos:\",response.data);const a√±osUnicos=[...new Set(response.data.filter(materia=>materia.carrera===carrera).map(materia=>materia.anio))].sort();setCursosDisponibles(a√±osUnicos);}catch(error){console.error(\"‚ùå Error al obtener cursos:\",error);setCursosDisponibles([]);}};const handleCursoChange=async e=>{const anioSeleccionado=e.target.value.replace(\"¬∫\",\"\").trim();setCurso(anioSeleccionado);console.log(`üì° (handleCursoChange) A√±o seleccionado: '${anioSeleccionado}'`);console.log(`üì° (handleCursoChange) Carrera seleccionada: '${carreraSeleccionada}'`);if(!carreraSeleccionada||!anioSeleccionado){console.warn(\"‚ö†Ô∏è No hay carrera o a√±o seleccionados. No se har√° la consulta.\");return;}try{const response=await axios.get(\"http://localhost:5000/materias\",{params:{carrera:carreraSeleccionada.trim(),anio:anioSeleccionado},headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});console.log(\"‚úÖ (handleCursoChange) Materias obtenidas antes de filtrar:\",response.data);const materiasFiltradas=response.data.filter(materia=>materia.carrera.trim().toLowerCase()===carreraSeleccionada.trim().toLowerCase()&&materia.anio===anioSeleccionado);console.log(\"‚úÖ (handleCursoChange) Materias filtradas en frontend:\",materiasFiltradas);setMateriasDisponibles(materiasFiltradas.map(m=>m.nombre_materia));}catch(error){console.error(\"‚ùå (handleCursoChange) Error al obtener materias:\",error);setMateriasDisponibles([]);}};// Funci√≥n para limpiar todos los campos del formulario (incluyendo el curso) al presionar Reset\nconst resetCamposFormulario=()=>{setCurso(\"\");setMateria(\"\");setLf(\"\");setFechaAprobacion(\"\");setCalificacionNumerica(\"\");setCalificacionLetras(\"\");setModoCursada(false);if(fechaAprobacionRef.current){fechaAprobacionRef.current.type=\"text\";}};// Funci√≥n para limpiar el formulario despu√©s de guardar, conservando la selecci√≥n de curso\nconst resetCamposPostSave=()=>{setMateria(\"\");setLf(\"\");setFechaAprobacion(\"\");setCalificacionNumerica(\"\");setCalificacionLetras(\"\");setModoCursada(false);if(fechaAprobacionRef.current){fechaAprobacionRef.current.type=\"text\";}};// Funci√≥n para volver a la vista de b√∫squeda\nconst volver=()=>{setDni(\"\");setResultados([]);setCurso(\"\");setMateria(\"\");setLf(\"\");setFechaAprobacion(\"\");setCalificacionNumerica(\"\");setCalificacionLetras(\"\");setCarreraSeleccionada(\"\");setMateriasDisponibles([]);setCursosDisponibles([]);setApNombre(\"\");setResolucion(\"\");setMostrarFormulario(false);};const numberToWords=num=>{switch(num){case 1:return\"Uno\";case 2:return\"Dos\";case 3:return\"Tres\";case 4:return\"Cuatro\";case 5:return\"Cinco\";case 6:return\"Seis\";case 7:return\"Siete\";case 8:return\"Ocho\";case 9:return\"Nueve\";case 10:return\"Diez\";default:return\"\";}};const handleSubmit=async e=>{e.preventDefault();// Validar que todos los campos obligatorios est√©n completos\nif(!curso||!materia||!lf||!fechaAprobacion||!calificacionNumerica){Swal.fire(\"Error\",\"Todos los campos son obligatorios\",\"error\");return;}// Preparar los datos a enviar\nconst data={dni,ap_nombre:apNombre,carrera:carreraSeleccionada,resolucion,materia,curso,l_f:lf,fecha_aprobacion:fechaAprobacion,numeros:calificacionNumerica,letras:calificacionLetras};try{// Consulta para verificar si ya existe una calificaci√≥n para ese DNI y materia\nconst existeResponse=await axios.get(\"http://localhost:5000/calificaciones\",{params:{dni,materia},headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});if(existeResponse.data&&existeResponse.data.length>0){// Extraer el registro existente y su id\nconst registroExistente=existeResponse.data[0];const idRegistro=registroExistente.id;console.log(\"ID obtenido:\",idRegistro);// Preguntar si se desea sobreescribir\nconst confirmacion=await Swal.fire({title:\"La materia ya se encuentra cargada\",text:\"¬øDesea sobreescribir?\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"Aceptar\",cancelButtonText:\"Cancelar\"});if(confirmacion.isConfirmed){// Ejecutar la actualizaci√≥n (PUT) usando el id obtenido\nawait axios.put(`http://localhost:5000/calificaciones/${idRegistro}`,data,{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});Swal.fire(\"¬°√âxito!\",\"La calificaci√≥n fue actualizada correctamente\",\"success\");}else{return;}}else{// Si no existe, crear la calificaci√≥n con POST\nawait axios.post(\"http://localhost:5000/calificaciones\",data,{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});Swal.fire(\"¬°√âxito!\",\"Datos almacenados correctamente\",\"success\");}// Reiniciar campos (excepto el curso)\nresetCamposPostSave();}catch(error){console.error(\"Error al almacenar los datos:\",error);Swal.fire(\"Error\",\"No se pudieron almacenar los datos\",\"error\");}};return/*#__PURE__*/_jsx(\"div\",{className:`calificaciones-component__container ${mostrarFormulario?\"ocultar-fondo\":\"\"}`,children:!mostrarFormulario?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calificaciones-component__form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"dni\",className:\"calificaciones-component__input\",placeholder:\"Ingrese DNI\",value:dni,onChange:e=>{// Reemplaza todo lo que no sea d√≠gito, toma solo los primeros 8 caracteres y actualiza el estado.\nconst numericValue=e.target.value.replace(/[^0-9]/g,'').slice(0,8);setDni(numericValue);},inputMode:\"numeric\",maxLength:\"8\"}),/*#__PURE__*/_jsx(\"button\",{className:\"calificaciones-component__btn-primary btn-buscar\",onClick:handleSearch,disabled:!dni,children:\"Buscar\"})]}),resultados.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"calificaciones-component__result-container visible\",children:resultados.map((resultado,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"calificaciones-component__result-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calificaciones-component__result-text\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Apellido y Nombre:\"}),\" \",resultado.nombre]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Carrera:\"}),\" \",resultado.carrera]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Resoluci\\xF3n:\"}),\" \",resultado.resolucion]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calificaciones-component__result-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCargarNotas(resultado.carrera,resultado.resolucion),children:\"Cargar Notas\"}),/*#__PURE__*/_jsx(AnaliticoButton,{dni:dni,apNombre:apNombre,carrera:resultado.carrera// o bien usar carreraSeleccionada si ya est√° en el estado\n,resolucion:resultado.resolucion// o resolucion={resolucion} si se actualiza en el estado\n}),/*#__PURE__*/_jsx(\"button\",{children:\"Porcentaje de Materias\"})]})]},index))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"calificaciones-formulario-notas\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"calificaciones-formulario__title\",children:\"CARGA DE NOTAS\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Carrera:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-group__input readonly\",value:carreraSeleccionada,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calificaciones-formulario__grid\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Curso\",/*#__PURE__*/_jsxs(\"select\",{className:\"form-group__input\",value:curso,onChange:handleCursoChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un curso\"}),cursosDisponibles.length===0?/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"No hay cursos disponibles\"}):cursosDisponibles.map((curso,index)=>/*#__PURE__*/_jsxs(\"option\",{value:curso,children:[curso,\"\\xBA\"]},index))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Materia\",/*#__PURE__*/_jsxs(\"select\",{className:\"form-group__input\",value:materia,onChange:e=>setMateria(e.target.value),disabled:!curso,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione una materia\"}),materiasDisponibles.length===0?/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"No hay materias disponibles\"}):materiasDisponibles.map((materia,index)=>/*#__PURE__*/_jsx(\"option\",{value:materia,children:materia},index))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"L/F\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-group__input lf-input\",value:lf,placeholder:\"Libro/Folio\",onChange:e=>{const newValue=e.target.value;const inputType=e.nativeEvent.inputType||\"\";if(newValue===\"\"){setLf(\"\");setModoCursada(false);setLfLocked(false);setCalificacionNumerica(\"\");setCalificacionLetras(\"\");setFechaAprobacion(\"\");return;}if((lf===\"Cursada Aprobada\"||lf===\"Debe Cursar\")&&inputType.includes(\"delete\")){setLf(\"\");setModoCursada(false);setLfLocked(false);setCalificacionNumerica(\"\");setCalificacionLetras(\"\");setFechaAprobacion(\"\");return;}const selectionStart=e.target.selectionStart;const selectionEnd=e.target.selectionEnd;const isAllSelected=selectionStart===0&&selectionEnd===lf.length;if(isAllSelected&&newValue.toUpperCase()===\"C\"){setModoCursada(true);setLf(\"Cursada Aprobada\");setCalificacionNumerica(\"---\");setCalificacionLetras(\"---\");setFechaAprobacion(\"\");return;}if(isAllSelected&&newValue.toUpperCase()===\"D\"){setModoCursada(true);setLf(\"Debe Cursar\");setLfLocked(true);setFechaAprobacion(\"---\");setCalificacionNumerica(\"---\");setCalificacionLetras(\"---\");return;}if(newValue.toUpperCase()===\"C\"){setModoCursada(true);setLf(\"Cursada Aprobada\");setCalificacionNumerica(\"---\");setCalificacionLetras(\"---\");setFechaAprobacion(\"\");return;}if(newValue.toUpperCase()===\"D\"){setModoCursada(true);setLf(\"Debe Cursar\");setLfLocked(true);setFechaAprobacion(\"---\");setCalificacionNumerica(\"---\");setCalificacionLetras(\"---\");return;}if(newValue.length<lf.length){setLf(newValue);if(newValue!==\"Cursada Aprobada\"&&newValue!==\"Debe Cursar\"){setModoCursada(false);setLfLocked(false);setCalificacionNumerica(\"\");setCalificacionLetras(\"\");}return;}const regex=/^(?:[1-9]\\d{0,2})(?:\\/(?:[1-9]\\d{0,2})?)?$/;if(regex.test(newValue)){setLf(newValue);}}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Fecha de aprobaci\\xF3n\",/*#__PURE__*/_jsx(\"input\",{ref:fechaAprobacionRef,type:\"text\",placeholder:\"Seleccione fecha\",className:\"form-group__input fecha-aprobacion\",value:fechaAprobacion// Si L/F es \"Debe Cursar\", la fecha se mantiene bloqueada\n,readOnly:lf===\"Debe Cursar\",onFocus:e=>{if(lf!==\"Debe Cursar\"){// Al hacer foco, se cambia a tipo \"date\" para mostrar el selector\ne.target.type=\"date\";}},onBlur:e=>{// Si no se ha seleccionado ning√∫n valor, se vuelve a \"text\" para mostrar el placeholder\nif(!e.target.value){e.target.type=\"text\";}else{// Si se ingres√≥ una fecha, verificamos el a√±o\nconst partes=e.target.value.split(\"-\");if(partes.length===3){const year=parseInt(partes[0],10);if(year<2010){// Si el a√±o es menor a 2010, reiniciamos el input\nsetFechaAprobacion(\"\");e.target.type=\"text\";// Opcional: Puedes notificar al usuario con un mensaje (por ejemplo, con SweetAlert)\nreturn;}}}},onChange:e=>{if(lf!==\"Debe Cursar\"){let value=e.target.value;// Opcional: si se quiere limitar el a√±o a 4 d√≠gitos\nconst partes=value.split(\"-\");if(partes.length>0){if(partes[0].length>4){partes[0]=partes[0].slice(0,4);value=partes.join(\"-\");}}setFechaAprobacion(value);}}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Calificaci\\xF3n\",modoCursada?/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-group__input\",value:\"---\",readOnly:true}):/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-group__input\",value:calificacionNumerica,placeholder:\"En n\\xFAmeros\",min:\"1\",max:\"10\",onChange:e=>{const newValue=e.target.value;if(newValue===\"\"){setCalificacionNumerica(\"\");setCalificacionLetras(\"\");return;}if(!/^(10|[1-9])$/.test(newValue)){return;}setCalificacionNumerica(newValue);setCalificacionLetras(numberToWords(parseInt(newValue,10)));}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Calificaci\\xF3n\",modoCursada?/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-group__input\",value:\"---\",readOnly:true}):/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-group__input\",placeholder:\"En letras\",value:calificacionLetras,readOnly:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"calificaciones-component__btn-primary btn-volver\",onClick:volver,children:\"Volver\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"calificaciones-component__btn-primary btn-guardar\",children:\"Guardar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"calificaciones-component__btn-primary btn-reset\",onClick:resetCamposFormulario,children:\"Reset\"})]})]})]})});};export default Calificaciones;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","Swal","AnaliticoButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Calificaciones","dni","setDni","resultados","setResultados","mostrarFormulario","setMostrarFormulario","curso","setCurso","materia","setMateria","lf","setLf","fechaAprobacion","setFechaAprobacion","fechaAprobacionRef","calificacionNumerica","setCalificacionNumerica","calificacionLetras","setCalificacionLetras","cursosDisponibles","setCursosDisponibles","materiasDisponibles","setMateriasDisponibles","carreraSeleccionada","setCarreraSeleccionada","apNombre","setApNombre","resolucion","setResolucion","modoCursada","setModoCursada","lfLocked","setLfLocked","handleCursoChange","target","value","handleSearch","length","fire","icon","title","text","response","get","headers","Authorization","localStorage","getItem","console","log","data","estudiante","nombre","carrera","error","handleCargarNotas","resolucionBusqueda","cargarCursos","encodeURIComponent","a√±osUnicos","Set","filter","map","anio","sort","e","anioSeleccionado","replace","trim","warn","params","materiasFiltradas","toLowerCase","m","nombre_materia","resetCamposFormulario","current","type","resetCamposPostSave","volver","numberToWords","num","handleSubmit","preventDefault","ap_nombre","l_f","fecha_aprobacion","numeros","letras","existeResponse","registroExistente","idRegistro","id","confirmacion","showCancelButton","confirmButtonText","cancelButtonText","isConfirmed","put","post","className","children","placeholder","onChange","numericValue","slice","inputMode","maxLength","onClick","disabled","resultado","index","onSubmit","readOnly","newValue","inputType","nativeEvent","includes","selectionStart","selectionEnd","isAllSelected","toUpperCase","regex","test","ref","onFocus","onBlur","partes","split","year","parseInt","join","min","max"],"sources":["C:/Users/Fede/Desktop/Proyecto/registro-login/src/components/forms/Calificaciones.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport \"./Calificaciones.css\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport AnaliticoButton from \"../funciones/AnaliticoButton\";\r\n\r\n\r\nconst Calificaciones = () => {\r\n  const [dni, setDni] = useState(\"\");\r\n  const [resultados, setResultados] = useState([]);\r\n  const [mostrarFormulario, setMostrarFormulario] = useState(false);\r\n  const [curso, setCurso] = useState(\"\");\r\n  const [materia, setMateria] = useState(\"\");\r\n  const [lf, setLf] = useState(\"\");\r\n  const [fechaAprobacion, setFechaAprobacion] = useState(\"\");\r\n  const fechaAprobacionRef = useRef(null);\r\n  const [calificacionNumerica, setCalificacionNumerica] = useState(\"\");\r\n  const [calificacionLetras, setCalificacionLetras] = useState(\"\");\r\n  const [cursosDisponibles, setCursosDisponibles] = useState([]);\r\n  const [materiasDisponibles, setMateriasDisponibles] = useState([]);\r\n  const [carreraSeleccionada, setCarreraSeleccionada] = useState(\"\");\r\n  const [apNombre, setApNombre] = useState(\"\");\r\n  const [resolucion, setResolucion] = useState(\"\");\r\n  const [modoCursada, setModoCursada] = useState(false);\r\n  const [lfLocked, setLfLocked] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    if (curso) {\r\n      handleCursoChange({ target: { value: curso } });\r\n    }\r\n  }, [curso]);\r\n\r\n  const handleSearch = async () => {\r\n    // Verifica que se haya ingresado DNI y que tenga 8 d√≠gitos\r\n    if (!dni || dni.length < 8) {\r\n      Swal.fire({ icon: \"error\", title: \"Error\", text: \"Ingrese un DNI v√°lido.\" });\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const response = await axios.get(`http://localhost:5000/estudiantes/${dni}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      });\r\n      console.log(\"üîç Estudiantes:\", response.data);\r\n      setResultados(response.data);\r\n  \r\n      if (response.data.length > 0) {\r\n        const estudiante = response.data[0];\r\n        setApNombre(estudiante.nombre);\r\n        setCarreraSeleccionada(estudiante.carrera);\r\n        setResolucion(estudiante.resolucion);\r\n      }\r\n    } catch (error) {\r\n      Swal.fire({ icon: \"error\", title: \"Error\", text: \"No se encontr√≥ informaci√≥n para este DNI.\" });\r\n      setResultados([]);\r\n    }\r\n  };\r\n  \r\n\r\n  const handleCargarNotas = async (carrera, resolucionBusqueda) => {\r\n    console.log(\"‚úÖ Cargando notas para la carrera:\", carrera);\r\n    setCarreraSeleccionada(carrera);\r\n    setResolucion(resolucionBusqueda); // Actualiza la resoluci√≥n con el valor correcto\r\n    setMostrarFormulario(true);\r\n    await cargarCursos(carrera);\r\n  };\r\n  \r\n\r\n  const cargarCursos = async (carrera) => {\r\n    try {\r\n      console.log(\"üì° Buscando cursos para la carrera:\", carrera);\r\n      const response = await axios.get(\r\n        `http://localhost:5000/materias?carrera=${encodeURIComponent(carrera)}`,\r\n        {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n        }\r\n      );\r\n\r\n      console.log(\"‚úÖ Cursos obtenidos:\", response.data);\r\n\r\n      const a√±osUnicos = [\r\n        ...new Set(\r\n          response.data\r\n            .filter((materia) => materia.carrera === carrera)\r\n            .map((materia) => materia.anio)\r\n        ),\r\n      ].sort();\r\n\r\n      setCursosDisponibles(a√±osUnicos);\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error al obtener cursos:\", error);\r\n      setCursosDisponibles([]);\r\n    }\r\n  };\r\n\r\n  const handleCursoChange = async (e) => {\r\n    const anioSeleccionado = e.target.value.replace(\"¬∫\", \"\").trim();\r\n    setCurso(anioSeleccionado);\r\n\r\n    console.log(`üì° (handleCursoChange) A√±o seleccionado: '${anioSeleccionado}'`);\r\n    console.log(`üì° (handleCursoChange) Carrera seleccionada: '${carreraSeleccionada}'`);\r\n\r\n    if (!carreraSeleccionada || !anioSeleccionado) {\r\n      console.warn(\"‚ö†Ô∏è No hay carrera o a√±o seleccionados. No se har√° la consulta.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5000/materias\", {\r\n        params: {\r\n          carrera: carreraSeleccionada.trim(),\r\n          anio: anioSeleccionado,\r\n        },\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n      });\r\n\r\n      console.log(\"‚úÖ (handleCursoChange) Materias obtenidas antes de filtrar:\", response.data);\r\n\r\n      const materiasFiltradas = response.data.filter(\r\n        (materia) =>\r\n          materia.carrera.trim().toLowerCase() ===\r\n          carreraSeleccionada.trim().toLowerCase() &&\r\n          materia.anio === anioSeleccionado\r\n      );\r\n\r\n      console.log(\"‚úÖ (handleCursoChange) Materias filtradas en frontend:\", materiasFiltradas);\r\n\r\n      setMateriasDisponibles(materiasFiltradas.map((m) => m.nombre_materia));\r\n    } catch (error) {\r\n      console.error(\"‚ùå (handleCursoChange) Error al obtener materias:\", error);\r\n      setMateriasDisponibles([]);\r\n    }\r\n  };\r\n\r\n  // Funci√≥n para limpiar todos los campos del formulario (incluyendo el curso) al presionar Reset\r\n  const resetCamposFormulario = () => {\r\n    setCurso(\"\");\r\n    setMateria(\"\");\r\n    setLf(\"\");\r\n    setFechaAprobacion(\"\");\r\n    setCalificacionNumerica(\"\");\r\n    setCalificacionLetras(\"\");\r\n    setModoCursada(false);\r\n\r\n    if (fechaAprobacionRef.current) {\r\n      fechaAprobacionRef.current.type = \"text\";\r\n    }\r\n  };\r\n\r\n  // Funci√≥n para limpiar el formulario despu√©s de guardar, conservando la selecci√≥n de curso\r\n  const resetCamposPostSave = () => {\r\n    setMateria(\"\");\r\n    setLf(\"\");\r\n    setFechaAprobacion(\"\");\r\n    setCalificacionNumerica(\"\");\r\n    setCalificacionLetras(\"\");\r\n    setModoCursada(false);\r\n\r\n    if (fechaAprobacionRef.current) {\r\n      fechaAprobacionRef.current.type = \"text\";\r\n    }\r\n  };\r\n\r\n  // Funci√≥n para volver a la vista de b√∫squeda\r\n  const volver = () => {\r\n    setDni(\"\");\r\n    setResultados([]);\r\n    setCurso(\"\");\r\n    setMateria(\"\");\r\n    setLf(\"\");\r\n    setFechaAprobacion(\"\");\r\n    setCalificacionNumerica(\"\");\r\n    setCalificacionLetras(\"\");\r\n    setCarreraSeleccionada(\"\");\r\n    setMateriasDisponibles([]);\r\n    setCursosDisponibles([]);\r\n    setApNombre(\"\");\r\n    setResolucion(\"\");\r\n    setMostrarFormulario(false);\r\n  };\r\n\r\n  const numberToWords = (num) => {\r\n    switch (num) {\r\n      case 1:\r\n        return \"Uno\";\r\n      case 2:\r\n        return \"Dos\";\r\n      case 3:\r\n        return \"Tres\";\r\n      case 4:\r\n        return \"Cuatro\";\r\n      case 5:\r\n        return \"Cinco\";\r\n      case 6:\r\n        return \"Seis\";\r\n      case 7:\r\n        return \"Siete\";\r\n      case 8:\r\n        return \"Ocho\";\r\n      case 9:\r\n        return \"Nueve\";\r\n      case 10:\r\n        return \"Diez\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n  \r\n    // Validar que todos los campos obligatorios est√©n completos\r\n    if (!curso || !materia || !lf || !fechaAprobacion || !calificacionNumerica) {\r\n      Swal.fire(\"Error\", \"Todos los campos son obligatorios\", \"error\");\r\n      return;\r\n    }\r\n  \r\n    // Preparar los datos a enviar\r\n    const data = {\r\n      dni,\r\n      ap_nombre: apNombre,\r\n      carrera: carreraSeleccionada,\r\n      resolucion,\r\n      materia,\r\n      curso,\r\n      l_f: lf,\r\n      fecha_aprobacion: fechaAprobacion,\r\n      numeros: calificacionNumerica,\r\n      letras: calificacionLetras,\r\n    };\r\n  \r\n    try {\r\n      // Consulta para verificar si ya existe una calificaci√≥n para ese DNI y materia\r\n      const existeResponse = await axios.get(\"http://localhost:5000/calificaciones\", {\r\n        params: { dni, materia },\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      });\r\n  \r\n      if (existeResponse.data && existeResponse.data.length > 0) {\r\n        // Extraer el registro existente y su id\r\n        const registroExistente = existeResponse.data[0];\r\n        const idRegistro = registroExistente.id;\r\n        console.log(\"ID obtenido:\", idRegistro);\r\n  \r\n        // Preguntar si se desea sobreescribir\r\n        const confirmacion = await Swal.fire({\r\n          title: \"La materia ya se encuentra cargada\",\r\n          text: \"¬øDesea sobreescribir?\",\r\n          icon: \"warning\",\r\n          showCancelButton: true,\r\n          confirmButtonText: \"Aceptar\",\r\n          cancelButtonText: \"Cancelar\",\r\n        });\r\n  \r\n        if (confirmacion.isConfirmed) {\r\n          // Ejecutar la actualizaci√≥n (PUT) usando el id obtenido\r\n          await axios.put(`http://localhost:5000/calificaciones/${idRegistro}`, data, {\r\n            headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n          });\r\n          Swal.fire(\"¬°√âxito!\", \"La calificaci√≥n fue actualizada correctamente\", \"success\");\r\n        } else {\r\n          return;\r\n        }\r\n      } else {\r\n        // Si no existe, crear la calificaci√≥n con POST\r\n        await axios.post(\"http://localhost:5000/calificaciones\", data, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n        });\r\n        Swal.fire(\"¬°√âxito!\", \"Datos almacenados correctamente\", \"success\");\r\n      }\r\n  \r\n      // Reiniciar campos (excepto el curso)\r\n      resetCamposPostSave();\r\n    } catch (error) {\r\n      console.error(\"Error al almacenar los datos:\", error);\r\n      Swal.fire(\"Error\", \"No se pudieron almacenar los datos\", \"error\");\r\n    }\r\n  }; \r\n\r\n  return (\r\n    <div className={`calificaciones-component__container ${mostrarFormulario ? \"ocultar-fondo\" : \"\"}`}>\r\n      {!mostrarFormulario ? (\r\n        <>\r\n          <div className=\"calificaciones-component__form-group\">\r\n          <input\r\n            type=\"text\"\r\n            id=\"dni\"\r\n            className=\"calificaciones-component__input\"\r\n            placeholder=\"Ingrese DNI\"\r\n            value={dni}\r\n            onChange={(e) => {\r\n              // Reemplaza todo lo que no sea d√≠gito, toma solo los primeros 8 caracteres y actualiza el estado.\r\n              const numericValue = e.target.value.replace(/[^0-9]/g, '').slice(0, 8);\r\n              setDni(numericValue);\r\n            }}\r\n            inputMode=\"numeric\"\r\n            maxLength=\"8\"\r\n          />\r\n\r\n            <button\r\n              className=\"calificaciones-component__btn-primary btn-buscar\"\r\n              onClick={handleSearch}\r\n              disabled={!dni}\r\n            >\r\n              Buscar\r\n            </button>\r\n          </div>\r\n\r\n          {resultados.length > 0 && (\r\n            <div className=\"calificaciones-component__result-container visible\">\r\n              {resultados.map((resultado, index) => (\r\n            <div key={index} className=\"calificaciones-component__result-item\">\r\n              <div className=\"calificaciones-component__result-text\">\r\n                <p>\r\n                  <strong>Apellido y Nombre:</strong> {resultado.nombre}\r\n                </p>\r\n                <p>\r\n                  <strong>Carrera:</strong> {resultado.carrera}\r\n                </p>\r\n                <p>\r\n                  <strong>Resoluci√≥n:</strong> {resultado.resolucion}\r\n                </p>\r\n              </div>\r\n              <div className=\"calificaciones-component__result-buttons\">\r\n                <button onClick={() => handleCargarNotas(resultado.carrera, resultado.resolucion)}>\r\n                  Cargar Notas\r\n                </button>\r\n                <AnaliticoButton\r\n                  dni={dni}\r\n                  apNombre={apNombre}\r\n                  carrera={resultado.carrera}  // o bien usar carreraSeleccionada si ya est√° en el estado\r\n                  resolucion={resultado.resolucion} // o resolucion={resolucion} si se actualiza en el estado\r\n                />\r\n                <button>Porcentaje de Materias</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n            </div>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div className=\"calificaciones-formulario-notas\">\r\n          <h2 className=\"calificaciones-formulario__title\">CARGA DE NOTAS</h2>\r\n          <form onSubmit={handleSubmit}>\r\n            <label>\r\n              Carrera:\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-group__input readonly\"\r\n                value={carreraSeleccionada}\r\n                readOnly\r\n              />\r\n            </label>\r\n\r\n            <div className=\"calificaciones-formulario__grid\">\r\n              <label>\r\n                Curso\r\n                <select className=\"form-group__input\" value={curso} onChange={handleCursoChange}>\r\n                  <option value=\"\">Seleccione un curso</option>\r\n                  {cursosDisponibles.length === 0 ? (\r\n                    <option value=\"\" disabled>\r\n                      No hay cursos disponibles\r\n                    </option>\r\n                  ) : (\r\n                    cursosDisponibles.map((curso, index) => (\r\n                      <option key={index} value={curso}>\r\n                        {curso}¬∫\r\n                      </option>\r\n                    ))\r\n                  )}\r\n                </select>\r\n              </label>\r\n\r\n              <label>\r\n                Materia\r\n                <select\r\n                  className=\"form-group__input\"\r\n                  value={materia}\r\n                  onChange={(e) => setMateria(e.target.value)}\r\n                  disabled={!curso}\r\n                >\r\n                  <option value=\"\">Seleccione una materia</option>\r\n                  {materiasDisponibles.length === 0 ? (\r\n                    <option value=\"\" disabled>\r\n                      No hay materias disponibles\r\n                    </option>\r\n                  ) : (\r\n                    materiasDisponibles.map((materia, index) => (\r\n                      <option key={index} value={materia}>\r\n                        {materia}\r\n                      </option>\r\n                    ))\r\n                  )}\r\n                </select>\r\n              </label>\r\n              \r\n              <label>\r\n              L/F\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-group__input lf-input\"\r\n                value={lf}\r\n                placeholder=\"Libro/Folio\"\r\n                onChange={(e) => {\r\n                  const newValue = e.target.value;\r\n                  const inputType = e.nativeEvent.inputType || \"\";\r\n\r\n                   \r\n                  if (newValue === \"\") {\r\n                    setLf(\"\");\r\n                    setModoCursada(false);\r\n                    setLfLocked(false);\r\n                    setCalificacionNumerica(\"\");\r\n                    setCalificacionLetras(\"\");\r\n                    setFechaAprobacion(\"\");\r\n                    return;\r\n                  }\r\n\r\n                   \r\n                  if ((lf === \"Cursada Aprobada\" || lf === \"Debe Cursar\") && inputType.includes(\"delete\")) {\r\n                    setLf(\"\");\r\n                    setModoCursada(false);\r\n                    setLfLocked(false);\r\n                    setCalificacionNumerica(\"\");\r\n                    setCalificacionLetras(\"\");\r\n                    setFechaAprobacion(\"\");\r\n                    return;\r\n                  }\r\n\r\n                   \r\n                  const selectionStart = e.target.selectionStart;\r\n                  const selectionEnd = e.target.selectionEnd;\r\n                  const isAllSelected = (selectionStart === 0 && selectionEnd === lf.length);\r\n\r\n                  \r\n                  if (isAllSelected && newValue.toUpperCase() === \"C\") {\r\n                    setModoCursada(true);\r\n                    setLf(\"Cursada Aprobada\");\r\n                    setCalificacionNumerica(\"---\");\r\n                    setCalificacionLetras(\"---\");\r\n                    setFechaAprobacion(\"\");\r\n                    return;\r\n                  }\r\n\r\n                   \r\n                  if (isAllSelected && newValue.toUpperCase() === \"D\") {\r\n                    setModoCursada(true);\r\n                    setLf(\"Debe Cursar\");\r\n                    setLfLocked(true);\r\n                    setFechaAprobacion(\"---\");\r\n                    setCalificacionNumerica(\"---\");\r\n                    setCalificacionLetras(\"---\");\r\n                    return;\r\n                  }\r\n\r\n                   \r\n                  if (newValue.toUpperCase() === \"C\") {\r\n                    setModoCursada(true);\r\n                    setLf(\"Cursada Aprobada\");\r\n                    setCalificacionNumerica(\"---\");\r\n                    setCalificacionLetras(\"---\");\r\n                    setFechaAprobacion(\"\");\r\n                    return;\r\n                  }\r\n\r\n                   \r\n                  if (newValue.toUpperCase() === \"D\") {\r\n                    setModoCursada(true);\r\n                    setLf(\"Debe Cursar\");\r\n                    setLfLocked(true);\r\n                    setFechaAprobacion(\"---\");\r\n                    setCalificacionNumerica(\"---\");\r\n                    setCalificacionLetras(\"---\");\r\n                    return;\r\n                  }\r\n\r\n           \r\n                  if (newValue.length < lf.length) {\r\n                    setLf(newValue);\r\n                    if (newValue !== \"Cursada Aprobada\" && newValue !== \"Debe Cursar\") {\r\n                      setModoCursada(false);\r\n                      setLfLocked(false);\r\n                      setCalificacionNumerica(\"\");\r\n                      setCalificacionLetras(\"\");\r\n                    }\r\n                    return;\r\n                  }\r\n\r\n         \r\n                  const regex = /^(?:[1-9]\\d{0,2})(?:\\/(?:[1-9]\\d{0,2})?)?$/;\r\n                  if (regex.test(newValue)) {\r\n                    setLf(newValue);\r\n                  }\r\n                }}\r\n              />\r\n            </label>\r\n\r\n            <label>\r\n              Fecha de aprobaci√≥n\r\n              <input\r\n                ref={fechaAprobacionRef}\r\n                type=\"text\"\r\n                placeholder=\"Seleccione fecha\"\r\n                className=\"form-group__input fecha-aprobacion\"\r\n                value={fechaAprobacion}\r\n                // Si L/F es \"Debe Cursar\", la fecha se mantiene bloqueada\r\n                readOnly={lf === \"Debe Cursar\"}\r\n                onFocus={(e) => {\r\n                  if (lf !== \"Debe Cursar\") {\r\n                    // Al hacer foco, se cambia a tipo \"date\" para mostrar el selector\r\n                    e.target.type = \"date\";\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  // Si no se ha seleccionado ning√∫n valor, se vuelve a \"text\" para mostrar el placeholder\r\n                  if (!e.target.value) {\r\n                    e.target.type = \"text\";\r\n                  } else {\r\n                    // Si se ingres√≥ una fecha, verificamos el a√±o\r\n                    const partes = e.target.value.split(\"-\");\r\n                    if (partes.length === 3) {\r\n                      const year = parseInt(partes[0], 10);\r\n                      if (year < 2010) {\r\n                        // Si el a√±o es menor a 2010, reiniciamos el input\r\n                        setFechaAprobacion(\"\");\r\n                        e.target.type = \"text\";\r\n                        // Opcional: Puedes notificar al usuario con un mensaje (por ejemplo, con SweetAlert)\r\n                        return;\r\n                      }\r\n                    }\r\n                  }\r\n                }}\r\n                onChange={(e) => {\r\n                  if (lf !== \"Debe Cursar\") {\r\n                    let value = e.target.value;\r\n                    // Opcional: si se quiere limitar el a√±o a 4 d√≠gitos\r\n                    const partes = value.split(\"-\");\r\n                    if (partes.length > 0) {\r\n                      if (partes[0].length > 4) {\r\n                        partes[0] = partes[0].slice(0, 4);\r\n                        value = partes.join(\"-\");\r\n                      }\r\n                    }\r\n                    setFechaAprobacion(value);\r\n                  }\r\n                }}\r\n              />\r\n            </label>\r\n\r\n              <label>\r\n                Calificaci√≥n\r\n                {modoCursada ? (\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-group__input\"\r\n                    value=\"---\"\r\n                    readOnly\r\n                  />\r\n                ) : (\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-group__input\"\r\n                    value={calificacionNumerica}\r\n                    placeholder=\"En n√∫meros\"\r\n                    min=\"1\"\r\n                    max=\"10\"\r\n                    onChange={(e) => {\r\n                      const newValue = e.target.value;\r\n                      if (newValue === \"\") {\r\n                        setCalificacionNumerica(\"\");\r\n                        setCalificacionLetras(\"\");\r\n                        return;\r\n                      }\r\n                      if (!/^(10|[1-9])$/.test(newValue)) {\r\n                        return;\r\n                      }\r\n                      setCalificacionNumerica(newValue);\r\n                      setCalificacionLetras(numberToWords(parseInt(newValue, 10)));\r\n                    }}\r\n                  />\r\n                )}\r\n              </label>\r\n\r\n              <label>\r\n                Calificaci√≥n\r\n                {modoCursada ? (\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-group__input\"\r\n                    value=\"---\"\r\n                    readOnly\r\n                  />\r\n                ) : (\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-group__input\"\r\n                    placeholder=\"En letras\"\r\n                    value={calificacionLetras}\r\n                    readOnly\r\n                  />\r\n                )}\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"form-buttons\">\r\n            <button type=\"button\" className=\"calificaciones-component__btn-primary btn-volver\" onClick={volver}>\r\n              Volver\r\n            </button>\r\n            <button type=\"submit\" className=\"calificaciones-component__btn-primary btn-guardar\">\r\n              Guardar\r\n            </button>\r\n            <button type=\"reset\" className=\"calificaciones-component__btn-primary btn-reset\" onClick={resetCamposFormulario}>\r\n              Reset\r\n            </button>\r\n          </div>\r\n\r\n          </form>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Calificaciones;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}